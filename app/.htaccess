<IfModule mod_headers.c>
    # --- INICIO CABECERAS DE SEGURIDAD PARA ESTÁTICOS ---
    #
    # Añade las cabeceras de seguridad a los archivos estáticos (css, js, etc.)
    # Esto soluciona el error de CSP y X-Content-Type-Options en /assets/
    #
    
        Header always set Content-Security-Policy "default-src 'self'; script-src 'self'; style-src 'self'; object-src 'none'; frame-ancestors 'self'; form-action 'self'; base-uri 'self';"
        Header always set X-Content-Type-Options "nosniff"
        Header always set X-Frame-Options "DENY"
    
    # --- FIN CABECERAS DE SEGURIDAD PARA ESTÁTICOS ---
</IfModule>

<IfModule mod_rewrite.c>
    RewriteEngine On

    # --- INICIO FRONT CONTROLLER ---
    #
    # Redirige todas las peticiones que NO sean un archivo o directorio real
    # a index.php para que el router de PHP las gestione.
    #
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
    # --- FIN FRONT CONTROLLER ---
</IfModule>

# --- INICIO BLOQUEAR LISTADO DE DIRECTORIOS ---
# Esto es lo que probablemente esté causando tu 403 (¡es algo bueno!)
Options -Indexes
# --- FIN BLOQUEAR LISTADO DE DIRECTORIOS ---